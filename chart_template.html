<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>航班数据可视化</title>
    <!-- 引入 ECharts 文件 -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; margin: 20px; background-color: #f4f7f9; }
        .container { max-width: 1200px; margin: 0 auto; background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        h1 { color: #333; text-align: center; border-bottom: 2px solid #007bff; padding-bottom: 10px; }
        .chart-container { width: 100%; height: 600px; margin-top: 20px; }
        .info { text-align: center; color: #666; margin-top: 10px; font-size: 0.9em; }
    </style>
</head>
<body>
    <div class="container">
        <h1>每日航班数量统计</h1>
        <div id="main" class="chart-container"></div>
        <div id="update-info" class="info">数据更新时间: 加载中...</div>
    </div>

    <script type="text/javascript">
        // 数据将由 Python 脚本在构建时注入
        var chartData = /*__JSON_DATA_PLACEHOLDER__*/;

        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));

        // 指定图表的配置项和数据
        var option = {
            title: {
                text: '各飞机每日航班次数',
                subtext: '数据来源: FlightAware',
                left: 'center'
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                }
            },
            legend: {
                data: ['航班次数'],
                bottom: 0
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '15%',
                containLabel: true
            },
            xAxis: {
                type: 'category',
                data: chartData.xAxis_data,
                axisLabel: {
                    interval: 0,
                    rotate: 45
                }
            },
            yAxis: {
                type: 'value',
                name: '航班次数'
            },
            series: [
                {
                    name: '航班次数',
                    type: 'bar',
                    data: chartData.series_data,
                    itemStyle: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                            { offset: 0, color: '#007bff' },
                            { offset: 1, color: '#00c6ff' }
                        ])
                    },
                    emphasis: {
                        itemStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                { offset: 0, color: '#0056b3' },
                                { offset: 1, color: '#007bff' }
                            ])
                        }
                    }
                }
            ]
        };

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
        
        // 更新页面信息
        document.getElementById('update-info').innerText = `数据更新时间: ${chartData.update_time} | 源文件: ${chartData.source_file}`;
        
        // 窗口大小变化时自适应调整图表
        window.addEventListener('resize', function() {
            myChart.resize();
        });
    </script>
</body>
</html>
